{% extends 'core/base.html' %}
{% load static %}

{% block content %}
<div class="mb-6 print:hidden flex flex-col md:flex-row justify-between items-center gap-4 max-w-4xl mx-auto px-4">
    <a href="{% url 'dashboard' %}" class="text-slate-500 hover:text-slate-900 font-bold text-sm flex items-center">
        <i class="fas fa-arrow-left mr-2"></i> Dashboard
    </a>
    <button onclick="window.print()" class="w-full md:w-auto bg-blue-600 text-white px-8 py-3 rounded-2xl shadow-xl shadow-blue-900/20 hover:bg-blue-700 font-black text-xs uppercase tracking-widest flex items-center justify-center transition-all active:scale-95">
        <i class="fas fa-print mr-2 text-lg"></i> Print Official Bill
    </button>
</div>

<div class="bg-white w-full md:w-[21cm] min-h-auto md:min-h-[29.7cm] mx-auto p-4 md:p-12 shadow-2xl print:shadow-none print:w-full print:p-0 print:m-0 font-serif text-slate-900 leading-tight relative border border-slate-100 print:border-none rounded-[2rem] md:rounded-none">
    
    <div class="flex justify-between items-start border-b-2 border-slate-800 pb-2 mb-4">
        <div class="text-[10px] md:text-sm font-bold uppercase tracking-widest">Tax Invoice</div>
        <div class="text-[10px] md:text-sm font-bold">Mo. 7096464491</div>
    </div>
    
    <div class="text-center mb-6">
        <h1 class="text-3xl md:text-6xl font-black text-[#a52a2a] tracking-tighter" style="font-family: 'Times New Roman', serif;">New Mobile Point</h1>
        <p class="text-[10px] md:text-xs font-bold text-slate-500 mt-1 uppercase tracking-widest">Smartphones • Accessories • Service</p>
    </div>

    <div class="grid grid-cols-2 mb-6 gap-4 border-b border-slate-100 pb-4 md:border-none">
        <div class="text-sm md:text-lg">
            <span class="font-bold">Bill No:</span> <span class="ml-1 border-b border-dotted border-slate-400 px-2 font-mono">#{{ invoice.id }}</span>
        </div>
        <div class="text-sm md:text-lg text-right">
            <span class="font-bold">Date:</span> <span class="ml-1 border-b border-dotted border-slate-400 px-2">{{ invoice.sale_date|date:"d/m/Y" }}</span>
        </div>
    </div>

    <div class="space-y-4 mb-8">
        <div class="flex items-end">
            <span class="font-bold text-sm md:text-lg mr-2 shrink-0">Name:</span>
            <div class="flex-grow border-b border-dotted border-slate-400 text-base md:text-xl px-2 font-bold text-blue-900">
                {{ invoice.customer.name }}
            </div>
        </div>
        <div class="flex flex-col md:flex-row gap-4">
            <div class="w-full md:w-1/2 flex items-end">
                <span class="font-bold text-xs mr-2">Address:</span>
                <div class="flex-grow border-b border-dotted border-slate-400 px-2 text-xs">
                    {{ invoice.customer.address|default:"Local" }}
                </div>
            </div>
            <div class="w-full md:w-1/2 flex items-end">
                <span class="font-bold text-xs mr-2">Phone:</span>
                <div class="flex-grow border-b border-dotted border-slate-400 px-2 text-xs">
                    {{ invoice.customer.phone }}
                </div>
            </div>
        </div>
    </div>

    <div class="overflow-x-auto mb-6">
        <table class="w-full border-2 border-slate-800 min-w-[500px] md:min-w-0">
            <thead>
                <tr class="border-b-2 border-slate-800 text-center font-bold bg-slate-50">
                    <th class="py-2 border-r-2 border-slate-800">Particulars</th>
                    <th class="w-[15%] py-2 border-r-2 border-slate-800">Qty</th>
                    <th class="w-[25%] py-2">Amount</th>
                </tr>
            </thead>
            <tbody>
                <tr class="text-sm md:text-lg h-32 align-top">
                    <td class="p-4 border-r-2 border-slate-800 space-y-2">
                        <div class="font-black text-slate-800 uppercase">{{ invoice.product.brand }} MOBILE</div>
                        <div class="text-xs">Model: <span class="font-bold">{{ invoice.product.model_name }}</span></div>
                        <div class="text-xs">IMEI: <span class="font-mono font-bold">{{ invoice.product.imei }}</span></div>
                    </td>
                    <td class="p-4 text-center border-r-2 border-slate-800 font-bold">1</td>
                    <td class="p-4 text-right font-black text-xl">₹{{ invoice.total_amount }}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="flex flex-col md:flex-row border-2 border-slate-800 mb-8">
        <div class="w-full md:w-[60%] p-4 border-b-2 md:border-b-0 md:border-r-2 border-slate-800">
            <p class="text-[10px] font-bold uppercase text-slate-400 mb-1">Amount in Words</p>
            <p class="italic font-bold text-sm underline decoration-dotted">{{ invoice.total_amount }} Rupees Only /-</p>
        </div>
        <div class="w-full md:w-[40%] divide-y divide-slate-200">
            <div class="flex justify-between p-3">
                <span class="font-bold text-xs">SUBTOTAL</span>
                <span class="font-bold">₹{{ invoice.total_amount }}</span>
            </div>
            <div class="flex justify-between p-3 bg-slate-50 font-black text-lg">
                <span>GRAND TOTAL</span>
                <span class="text-blue-700">₹{{ invoice.total_amount }} /-</span>
            </div>
        </div>
    </div>

    <div class="mt-4 text-[9px] md:text-xs font-bold leading-relaxed bg-slate-50 p-4 rounded-xl border border-slate-100">
        <p>૧. મોબાઈલ સર્વિસ માટે કંપનીમાં લઈ જવાની જવાબદારી અમારી રહેશે.</p>
        <p>૨. એક્ટીવેશન થયેલો માલ પરત લેવામાં આવશે નહી. ડેમેજ માલની વોરંટી મળતી નથી.</p>
        <p>૩. રીપેરીંગ સમય મર્યાદા કંપનીના નિયમો મુજબ રહેશે.</p>
    </div>

    <div class="mt-12 flex justify-between items-end px-4 pb-10 md:pb-0">
        <div class="text-[10px] font-bold">
            <p>GSTIN: 24DZUPM0330M1Z1</p>
            <p class="text-slate-400 uppercase">Subject to danta Jurisdiction</p>
        </div>
        <div class="text-center">
            <p class="font-black text-slate-900 text-sm mb-8 uppercase">For, New Mobile Point</p>
            <div class="border-t border-slate-400 pt-1">
                <p class="font-bold text-xs uppercase tracking-widest">Authorized Signatory</p>
            </div>
        </div>
    </div>
</div>

<style>
    /* Screen pe fonts alag, Print pe alag */
    @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+Gujarati:wght@400;700&display=swap');

    @media print {
        @page { size: A4; margin: 0; }
        body { background: white; }
        .print\:hidden { display: none !important; }
        aside, nav, .flex-col.md\:flex-row { display: none !important; }
        
        /* Force the bill to fill the paper */
        .md\:w-\[21cm\] {
            width: 100% !important;
            margin: 0 !important;
            padding: 40px !important;
            box-shadow: none !important;
            border: none !important;
        }
    }
</style>
{% endblock %}